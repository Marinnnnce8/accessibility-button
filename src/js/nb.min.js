if("undefined"==typeof UIkit)throw new Error("NB requires UIkit. UIkit must be included before this script.");!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("nb",e):(t=t||self).NB=e()}(this,function(){"use strict";var f=UIkit.util,s="Promise"in window?window.Promise:f.Promise;function u(){return t(arguments)}function r(){return t(arguments,!0)}function t(t,e){for(var i,r,s=document,n=".",a=[".","#","[data]"],o=0;o<t.length;o++){var l=t[o];if(f.isString(l))if(-1!==a.indexOf(l))n=l;else{i=l;for(var u=0;u<a.length;u++){var c=a[u];f.startsWith(i,c)&&(i=i.replace(c,""),n=c)}}else f.isNode(l)&&(s=l)}switch(n){case"[data]":r="[data-"+i+"]";break;default:r=n+i}return f[e?"$$":"$"](r,s)}function c(t,e){if(t=t||[location.protocol,"//",location.host,location.pathname].join(""),void 0!==e&&f.isPlainObject(e)||(e={}),f.includes(t,"#")){var i=t.split("#"),r=i[1].split("?");t=i[0]+(1<r.length?"?"+r[1]:"")+"#"+r[0]}return e=f.assign({method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"},responseType:"json"},e),new s(function(i,r){f.ajax(t,e).then(function(t){var e=o(t);e.status?i(e):r(e)},function(t){r(o(t.xhr,t.status,t))})})}function h(){for(var t={},e="",i=!1,r=0;r<arguments.length;r++){var s=arguments[r];if(f.isBoolean(s))i=s;else if(f.isString(s)&&s)e=s;else if(f.isArray(s)&&s.length){"class"in t||(t.class=[]),f.isArray(t.class)||(t.class=[t.class]);for(var n=0;n<s.length;n++)t.class.push(s[n]);e="div"}else f.isPlainObject(s)&&(t=f.assign(t,s))}var a=[];for(var o in t)if(f.hasOwn(t,o)){var l=t[o];switch(o){case"element":case"nodeName":case"tag":e=e||l;break;case"close":i=f.toBoolean(l);break;default:!1!==l&&(""==l||f.isBoolean(l)?a.push(o):(l=d(l),a.push(o?o+"='"+l+"'":l)))}}return a=(a=a.join(" "))?" "+a:"",(e=e&&e.replace(/<|>|\//gi,""))?"<"+e+a+">"+(i?"</"+e+">":""):a}function d(t){return f.isArray(t)?t=t.join(" "):f.isPlainObject(t)&&(t=JSON.stringify(t)),t}function n(t,e){return a(atob(t),e)}function a(e,i){if(f.isPlainObject(e))return e;f.isNode(e)&&(e=f.data(e,i));try{e=JSON.parse(e)}catch(t){i&&f.includes(e,i)&&(e=e.split(i))}return e}function o(t,e,i){void 0!==e&&f.isNumber(e)||(f.isString(e)&&(i=e),e=500),t.status&&(e=t.status),void 0===i&&(i=null);var r=t.response;if(!f.isPlainObject(r))try{r=JSON.parse(r)}catch(t){i=i||r}return f.isPlainObject(r)?"errors"in r?(r=r.errors,e<400&&(e=0)):"data"in r&&(r=r.data):(r=i,e=500),{status:parseInt(e),response:r}}function l(t,e,i){f.isString(e)&&(e={alt:e}),void 0===e&&(e={}),void 0===i&&(i={});var r="img"===(i=f.assign({focus:!1,tag:"img","uk-img":!0,src:"url"},i)).tag,s={left:50,top:50},n=!1,a=!1;if(f.isPlainObject(t)&&(t.focus&&f.isPlainObject(t.focus)&&(s=f.assign(s,t.focus)),t.srcset&&(n=t.srcset),t.sizes&&(a=t.sizes),t=t[i.src]),e=f.assign({alt:"",width:0,height:0},e),!t)return"";var o=t.match(/(\.\d*x\d*\.)/g);if(r&&o){var l=o[0].split("x");e.width||(e.width=f.toNumber(l[0].replace(".",""))),e.height||(e.height=f.toNumber(l[1].replace(".","")))}if(!r&&i.focus){var u=e.style?e.style.split(";"):[];u.push("background-position:"+s.left+"% "+s.top+"%"),e.style=u.join(";")}if(0!=e.width&&r||(e.width=!1),0!=e.height&&r||(e.height=!1),r||(e.alt=!1),i["uk-img"]){var c={src:r&&"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==","data-src":t,"data-srcset":n,"data-uk-img":i["uk-img"]};a&&(c[(r?"":"data-")+"sizes"]=a),e=f.assign(c,e)}else r?(e.src=t,e.srcset=n,e.sizes=a):e.style="background-image:url("+t+");"+(e.style?e.style:"");return h(e,i.tag)}function p(t){return/<[a-z][\s\S]*>/i.test(t)}function m(t){return p(t)?t:("<"==t.substr(0,1)?"":"<")+t+(">"==t.substr(t.length-1,1)?"":">")}function g(t,e){return void 0===e&&(e="."),/.*[.,\/!?\^&\*;:{}=]$/.test(t)||(t+=e),t}function v(t,e){void 0!==t&&void 0!==e&&t in I.options&&(f.isPlainObject(I.options[t])&&f.isPlainObject(e)?I.options[t]=f.assign({},I.options[t],e):I.options[t]=e)}function b(t){if(void 0!==t){f.isArray(t)&&(t=t.join("<br>"));for(var e="primary",i={},r=!1,s={class:["uk-alert"]},n=1;n<arguments.length;n++){var a=arguments[n];if(f.isBoolean(a))r=a;else if(f.isNumeric(a))a=f.toNumber(a),1==n?e=a<100||400<=a?"danger":"success":i.duration=a;else if(f.isString(a))e=a;else if(f.isArray(a))for(var o=0;o<a.length;o++)s.class.push(a[o]);else if(f.isPlainObject(a))if("animation"in a)i=f.assign(i,a);else{if("class"in a){f.isArray(a.class)||(a.class=a.class.split(" "));for(o=0;o<a.class.length;o++)s.class.push(a.class[o]);delete a.class}s=f.assign(s,a)}}return"danger"==e&&(s.role="alert"),s.class.push("uk-alert-"+e),s["data-uk-alert"]=!r&&!Object.keys(i).length||f.assign({},I.options.ukAlert,i),j((r?h({class:"uk-alert-close","data-uk-close":!0},"a",!0):"")+j(t,p(t)?"":"p"),s,"div")}}function k(t){if(void 0!==t){var e=f.isString(t)?{icon:t.replace("uk-","")}:t;if(f.isPlainObject(e)){for(var i="data-uk-icon",r={},s="span",n=1;n<arguments.length;n++){var a=arguments[n];f.isNumeric(a)?e.ratio=f.toNumber(a):f.isString(a)?f.startsWith(a,"data-uk")?i=a:s=a:f.isArray(a)?r.class=a:f.isPlainObject(a)&&(r=f.assign(r,a))}return r[i]=e,h(r,s,!0)}}}function y(t){if(void 0!==t&&(f.isString(t)&&(t={message:t}),f.isPlainObject(t))){for(var e=1;e<arguments.length;e++){var i=arguments[e];f.isNumeric(i)?t.timeout=f.toNumber(i):f.isString(i)?i.includes("-")?t.pos=i:t.status=i:f.isPlainObject(i)&&(t=f.assign(i,t))}f.isUndefined(t.message)||UIkit.notification(f.assign({},I.options.ukNotification,t))}}function A(){for(var t=[{},"data-uk-spinner"],e=0;e<arguments.length;e++)t.push(arguments[e]);return k.apply(null,t)}function j(t,e,i){if((void 0===e||!e)&&void 0===i)return t;if((f.isArray(e)||f.isPlainObject(e))&&(e=h(e,i)),f.isString(e)&&(f.startsWith(e,"uk-")||f.startsWith(e,"nb-"))&&(e="<div class='"+e+"'>"),e=m(e),f.isArray(t)){var r=e.split(">")[0].replace("<","");t=t.join("</"+r.split(" ")[0]+"><"+r+">")}var s;return f.includes(e,"></")&&!/=['|\"][^']+(><\/)[^']+['|\"]/.test(e)?(s=e.split("></"))[0]+">"+t+"</"+s.splice(1).join("></"):2==(s=e.split(">",2)).length?e+t+"</"+s[0].split(" ")[0].replace(/</gi,"")+">":t}Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var e=this;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});var e={args:"text",props:["text"],beforeConnect:function(){var t=n(this.text),e=t;if(f.isPlainObject(t))for(var i in e=t.text,t)"text"!==i&&("href"!=i||e||(e=t[i]),f.attr(this.$el,i,d(t[i])));this.$el.innerHTML=e,f.removeAttr(this.$el,"data-"+this.$name)}},i={args:"msgConfirm",props:["msgConfirm"],data:{button:null,buttonText:null,captcha:null,response:"",scroller:null,status:0},beforeConnect:function(){var e=f.$("input[type=hidden]._post_token",this.$el);e&&c("?CSRF=1").then(function(t){200==t.status&&(f.attr(e,"name",t.response.name),f.attr(e,"value",t.response.value))}),this.scroller=f.$(h({hidden:!0},"div",!0)),f.append(this.$el,this.scroller)},events:{submit:function(t){t.preventDefault(),t.stopPropagation();var o=this.$el,l=[],e=r("nb-form-errors",o);if(e&&f.remove(e),f.$$("input[required], select[required], textarea[required]",o).forEach(function(t){var e=t.closest(".nb-form-content");if(f.attr(t,"aria-invalid",!1),f.remove(u("nb-form-error",e)),!t.validity.valid){f.attr(t,"aria-invalid",!0);var i=f.attr(t,"title");i=i||t.validationMessage;var r=t.id,s=r?f.$("label[for="+r+"]",o):null;i=g(i),l.push(j((s?s.innerHTML+": ":"")+i,{href:"#"+(r||o.id),class:"uk-link-reset","data-uk-scroll":{duration:I.options.speed,offset:I.options.offset}},"a"));var n=j(k("warning",.75)+" "+i,"uk-text-danger nb-form-error"),a=f.$("[role=alert]",e);a?f.html(a,n):f.before(t,n)}}),l.length)return f.trigger(o,"invalid",this),f.before(u("uk-grid",o),b(j(j(l,"li"),"ul"),"danger",["nb-form-errors"])),UIkit.scroll(this.scroller,{duration:I.options.speed,offset:I.options.offset}).scrollTo(o),f.on(".nb-form-errors a[href^='#']","click",function(t){f.$(f.attr(this,"href")).focus()}),!1;if(this.button=f.$("button[type=submit]",o),this.msgConfirm){var i=this;UIkit.modal.confirm(this.msgConfirm).then(function(){O.call(i)},function(){return!1})}else O.call(this)}}};function O(){var t=this.$el,e=f.attr(t,"method");this.buttonText=f.html(this.button),f.html(this.button,A(.467)),this.captcha=u("g-recaptcha",t);var i=this;c(t.action,{data:new FormData(t),method:e||"POST"}).then(function(t){i.status=t.status,i.response=t.response,t.response?S.call(i):$.call(i,t.status,"Error")},function(t){$.call(i,t.status,t.response)})}function $(t,e){this.status=t,this.response=e,f.trigger(this.$el,"error",this),f.includes([401,412,500],t)?(f.html(this.button,this.buttonText),this.captcha&&grecaptcha.reset(),UIkit.modal.alert(b(e,"danger"))):S.call(this)}function S(){var t=this.$el,e=this.response;if(f.trigger(t,"complete",this),f.isPlainObject(e)){if(e.notification&&y(e.notification),e.redirect)return void(f.isString(e.redirect)?window.location.href=e.redirect:window.location.reload());e=e.message}if(f.remove(this.button),this.captcha&&f.remove(this.captcha),f.$$("input, select, textarea",t).forEach(function(t){f.attr(t,"disabled",!0)}),e){var i=u("uk-grid",t);f.before(i||t,b(e,this.status)),UIkit.scroll(this.scroller,{duration:I.options.speed,offset:I.options.offset}).scrollTo(t)}}var w={args:"renderData",props:{clsMore:String,clsMoreButton:String,form:String,limit:Number,more:String,query:Object,render:String,renderData:String,start:Number,url:String},data:{errors:[],render:"renderItems",response:{},start:0,status:0,url:""},beforeConnect:function(){var s=this;this.form&&f.isUndefined(this._connected)&&f.on(this.form,"submit reset",function(t){var e={};if("submit"==t.type){t.preventDefault(),t.stopPropagation();for(var i=function(t){if("function"==typeof FormData&&"entries"in FormData.prototype)return Array.from(new FormData(t).entries());for(var e=[],i=t.elements,r=0;r<i.length;r++){var s=i[r],n=s.tagName.toUpperCase();if("SELECT"===n||"TEXTAREA"===n||"INPUT"===n){var a=s.type,o=s.name;if(o&&!s.disabled&&"submit"!==a&&"reset"!==a&&"button"!==a&&("radio"!==a&&"checkbox"!==a||s.checked))if("SELECT"===n)for(var l=s.getElementsByTagName("option"),u=0;u<l.length;u++){var c=l[u];c.selected&&e.push([o,c.value])}else"file"===a?e.push([o,""]):e.push([o,s.value])}}return e}(this),r=0;r<i.length;r++)i[r][1]&&(e[i[r][0]]=i[r][1])}x.call(s,e)}),this.clsMore||(this.clsMore="uk-text-center uk-margin-large-top"),f.includes(this.clsMore,"nb-json-more")||(this.clsMore="nb-json-more "+this.clsMore),this.clsMoreButton||(this.clsMoreButton="uk-button-primary"),f.includes(this.clsMoreButton,"uk-button-")&&!f.includes(this.clsMoreButton,"uk-button ")&&(this.clsMoreButton="uk-button "+this.clsMoreButton),this.init=this.start},connected:function(){var t=this.$el;if(this.renderData){var e=P.call(this,n(this.renderData));e?(f.html(t,e),f.trigger(t,"render",this),f.trigger(t,"complete",this)):(f.html(t,b(k("warning"),"danger")),f.trigger(t,"error",this)),f.removeAttr(t,"data-"+this.$name),this.$destroy()}else N.call(this);var i=this;f.on(t,"error",function(){f.html(t,b(i.errors,i.status))})},events:[{name:"click",delegate:function(){return".nb-json-more button"},handler:function(t){N.call(this)}}]};function N(){var n=this.$el,a=u("nb-json-more",n);f.remove(".uk-alert",n),a||(a=f.$(j(j(this.more,{type:"button",class:this.clsMoreButton},"button"),this.clsMore)),f.append(n,a)),a.style.display="";var o=f.$("button",a);f.attr(o,"disabled",!0),f.html(o,f.html(o).replace(this.more,A(.467)));var e={};for(var t in e.start=this.start,f.isNumber(this.limit)&&(e.limit=this.limit),this.query)e[t]=this.query[t];var l=this;c(this.url+"?"+Object.keys(e).map(function(t){return t+"="+e[t]}).join("&")).then(function(t){l.status=t.status,l.response=t.response;var e=l.response;if(e){f.removeAttr(o,"disabled");var i=u("uk-spinner",o);if(i&&(f.before(i,l.more),f.remove(i)),e.message){var r=u("nb-json-message",n);r||(r=f.$(j("","nb-json-message uk-margin-top uk-margin-bottom")),f.prepend(n,r)),f.html(r,b(e.message.replace("{count}",e.count+e.start-l.init).replace("{total}",e.total-l.init),"primary"))}var s=P.call(l,e);s?(f.before(a,s),f.trigger(n,"render",l)):f.trigger(n,"error",l),e.count&&0!==e.remaining&&l.more?(f.isUndefined(l.limit)&&(l.limit=parseInt(e.limit)),l.start=l.start+l.limit):a.style.display="none",f.trigger(n,"complete",l)}else l.errors=["Error"],f.trigger(n,"error",l)},function(t){l.status=t.status,l.errors=t.response,f.trigger(n,"error",l)})}function P(t){var e=window[this.render];return f.isFunction(e)&&f.isArray(t.items)?(!f.isUndefined(t.config)&&f.isPlainObject(t.config)||(t.config={}),e.call(this,t.items,t.config)):(this.errors=["Sorry, the items could not be rendered."],void(this.status=500))}function x(t){var e=this;1<arguments.length&&(e=UIkit.nbJson(arguments[1]));var i="data-"+e.$name,r=e.$el,s=a(r,i);s.query=t,f.html(r,""),e.start=e.init,f.attr(r,i,JSON.stringify(s))}UIkit.component("nbObfuscate",e),UIkit.component("nbForm",i),UIkit.component("nbJson",w);var I=function(){},E=256;return I.options={offset:128,duration:E,ukAlert:{animation:!0,duration:E},ukNotification:{status:"primary",pos:"top-right",timeout:4096}},I.util=Object.freeze({$:u,$$:r,ajax:c,attr:h,base64_decode:n,base64_encode:function(t,e){return void 0===e&&(e=""),f.isArray(t)&&(t=t.join(e)),f.isPlainObject(t)&&(t=JSON.stringify(t)),btoa(t)},data:a,debounce:function(r,s,n){var a;return void 0===s&&(s=I.options.duration),function(){var t=this,e=arguments,i=n&&!a;clearTimeout(a),a=setTimeout(function(){a=null,n||r.apply(t,e)},s),i&&r.apply(t,e)}},getRequestResponse:o,img:l,imgBg:function(t,e,i){return f.isPlainObject(e)||(e={}),f.isPlainObject(i)||(i={}),l(t,e=f.assign({alt:!1,class:"uk-background-cover"},e),i=f.assign({tag:"div",focus:!0},i))},isTag:p,jsonQuery:x,makeTag:m,punctuateString:g,setOption:v,ukAlert:b,ukIcon:k,ukNotification:y,ukSpinner:A,ukWidths:function(t,e){for(var i={},r=["s","m","l","xl"],s=0;s<r.length;s++)i[r[s]]=f.toNumber(f.getCssVar("breakpoint-"+r[s]).replace("px",""));if(void 0===t)return i;for(void 0===e&&(e="uk-child-width-1-"),r=[],s=0;s<t.length;s++){var n=t[s];if(-1!==n.indexOf(e)){var a=-1!==n.indexOf("@")?n.split("@")[1]:0,o=100/parseInt(n.replace(e,""));r.push((a&&a in i?"(min-width: "+i[a]+"px) ":"")+o.toFixed(2)+"vw")}}return r},wrap:j}),f.ready(function(){var t=setInterval(function(){UIkit._initialized&&(f.trigger(document,"UIkit_initialized"),clearInterval(t))},E),e=f.$("header");e&&v("offset",e.offsetHeight+32);var i=f.$$("a[target=_blank]");if(i){var r=["noopener","noreferrer"];i.forEach(function(t){var e=f.attr(t,"rel");e=f.isString(e)?e.split(" "):[];for(var i=0;i<r.length;i++)e.indexOf(r[i])<0&&e.push(r[i]);f.attr(t,"rel",e.join(" "))})}}),I});